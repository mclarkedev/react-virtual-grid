{"version":3,"sources":["../src/grid.jsx"],"names":["MAX_SCROLLABLE_HEIGHT","navigator","userAgent","search","Infinity","Grid","props","_scrolling","_pinnedColumnWidths","_pinnedRowHeights","_sizeDetector","strategy","state","componentDidMount","listenTo","_root","handleResize","update","scrollOptions","disableMouse","bounce","scrollX","freeScroll","scrollbars","probeType","mouseWheel","preventDefault","interactiveScrollbars","_scroller","IScroll","_scrollInner","on","handleScroll","handleScrollStart","handleScrollEnd","componentWillReceiveProps","nextProps","refresh","componentWillUnmount","uninstall","off","destroy","render","styles","contentStyle","scrollContent","position","width","calculateScrollableWidth","cells","height","calculateScrollableHeight","container","bindRoot","scrollOverlay","bindScrollOverlay","scrollContainer","bindScrollInner","gridBody","renderLeftPane","renderRightPane","renderCenterPane","renderColumnResizeGuide","renderRowResizeGuide","attrs","pane","left","fixedLeftColumnsWidth","bindLeftPane","renderLeftPaneHeader","renderLeftPaneFooter","renderLeftPaneBody","fixedLeftColumnCount","top","right","calculateFixedHeadersHeight","bindLeftPaneHeader","leftPaneHeaderContent","renderCellRange","fixedHeaderCount","topLeftRows","topLeftColumns","fixedFooterCount","bottom","calculateFixedFootersHeight","fromRow","rowCount","toRow","bindLeftPaneFooter","leftPaneFooterContent","bottomLeftRows","bottomLeftColumns","estimatedColumnWidth","estimatedRowHeight","translatedPane","leftRows","length","bindLeftPaneBody","leftPaneBodyContent","leftColumns","fixedRightColumnCount","fixedRightColumnsWidth","bindRightPane","renderRightPaneHeader","renderRightPaneFooter","renderRightPaneBody","fromColumn","columnCount","toColumn","bindRightPaneHeader","rightPaneHeaderContent","topRightRows","topRightColumns","bindRightPaneFooter","rightPaneFooterContent","bottomRightRows","bottomRightColumns","bindRightPaneBody","rightPaneBodyContent","rightRows","rightColumns","bindCenterPane","renderCenterPaneHeader","renderCenterPaneFooter","renderCenterPaneBody","overflow","topColumns","bindCenterPaneHeader","centerPaneHeaderContent","topRows","bottomColumns","bindCenterPaneFooter","bottomRows","rows","columns","bindCenterPaneBody","centerPaneBodyContent","_resizingColumn","column","find","cell","guideStyle","columnResizeGuide","_centerPaneBody","offsetTop","_resizingRow","row","rowResizeGuide","_leftPane","offsetWidth","lastColumn","Math","min","lastRow","lastTopLeftRow","topOffset","lastBottomRow","lastBottomRowTop","invalidateSizes","calculator","invalidate","scrollTop","scrollLeft","force","x","preloadPixelsX","y","preloadPixelsY","bounds","max","clientWidth","clientHeight","cellsWithinBounds","changed","onExtentsChange","setState","setScroll","scrollableWidth","scrollableHeight","_lastScrollableWidth","_lastScrollableHeight","diffY","diffX","setTimeout","updatedScrollLeft","updatedScrollTop","scrollTo","fixedHeadersHeight","_leftPaneBody","childNodes","style","_rightPaneBody","_centerPaneHeader","_centerPaneFooter","_scrollOverlay","offsetHeight","_rightPane","_centerPane","clearPinnedWidths","clearPinnedWidth","columnIndex","clearPinnedHeights","clearPinnedHeight","rowIndex","renderCells","renderRows","rowRange","renderCell","renderRow","visibleRowIndex","rowCells","rowData","columnRange","visibleColumnIndex","columnData","push","lastOffset","_calculator","GridCalculator","calculateRowHeight","calculateColumnWidth","React","Component","propTypes","PropTypes","number","isRequired","columnWidth","oneOfType","func","rowHeight","onScrollStart","onScroll","onScrollEnd","object","defaultProps","node","_leftPaneHeader","_leftPaneFooter","_rightPaneHeader","_rightPaneFooter","event","handleColumnResizeStart","handleColumnResize","handleColumnResizeEnd","handleRowResizeStart","handleRowResize","handleRowResizeEnd","rowTop","rowStyle","backgroundColor","cursor","borderRadius"],"mappings":"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","file":"grid.js","sourcesContent":["import React from 'react';\nimport PropTypes from 'react-proptypes';\nimport cx from 'classnames';\nimport GridCalculator from './grid-calculator';\nimport elementResizeDetector from 'element-resize-detector';\nimport IScroll from 'iscroll/build/iscroll-probe';\n\nconst MAX_SCROLLABLE_HEIGHT = navigator.userAgent.search('Firefox') > 0 ? 17895500 : Infinity;\n/* eslint-disable react/no-unused-prop-types */\n\nexport default class Grid extends React.Component {\n  static propTypes = {\n    preloadPixelsX: PropTypes.number,\n\n    preloadPixelsY: PropTypes.number,\n\n    estimatedRowHeight: PropTypes.number,\n\n    estimatedColumnWidth: PropTypes.number,\n\n    columnCount: PropTypes.number.isRequired,\n\n    rowCount: PropTypes.number.isRequired,\n\n    fixedLeftColumnCount: PropTypes.number,\n\n    fixedRightColumnCount: PropTypes.number,\n\n    fixedHeaderCount: PropTypes.number,\n\n    fixedFooterCount: PropTypes.number,\n\n    columnWidth: PropTypes.oneOfType([ PropTypes.number, PropTypes.func ]),\n\n    rowHeight: PropTypes.oneOfType([ PropTypes.number, PropTypes.func ]),\n\n    renderRow: PropTypes.func,\n\n    renderRows: PropTypes.func,\n\n    renderCell: PropTypes.func,\n\n    renderCells: PropTypes.func,\n\n    onExtentsChange: PropTypes.func,\n\n    onScrollStart: PropTypes.func,\n\n    onScroll: PropTypes.func,\n\n    onScrollEnd: PropTypes.func,\n\n    scrollOptions: PropTypes.object\n  };\n\n  static defaultProps = {\n    preloadPixelsX: 0,\n    preloadPixelsY: 0,\n    fixedLeftColumnCount: 0,\n    fixedRightColumnCount: 0,\n    fixedHeaderCount: 0,\n    fixedFooterCount: 0,\n    estimatedColumnWidth: 130,\n    estimatedRowHeight: 30\n  };\n\n  constructor(props) {\n    super(props);\n\n    this._scrolling = false;\n\n    this._pinnedColumnWidths = {};\n    this._pinnedRowHeights = {};\n\n    this._sizeDetector = elementResizeDetector({strategy: 'scroll'});\n\n    this.state = {};\n  }\n\n  componentDidMount() {\n    this._sizeDetector.listenTo(this._root, this.handleResize);\n\n    this.update(0, 0);\n\n    const scrollOptions = {\n      disableMouse: true,\n      bounce: false, // disable bounce because we're already customizing positioning\n      scrollX: true,\n      freeScroll: true,\n      scrollbars: true,\n      probeType: 3,\n      mouseWheel: true,\n      preventDefault: false,\n      interactiveScrollbars: true,\n      ...this.props.scrollOptions\n    };\n\n    this._scroller = new IScroll(this._scrollInner, scrollOptions);\n    this._scroller.on('scroll', this.handleScroll);\n    this._scroller.on('scrollStart', this.handleScrollStart);\n    this._scroller.on('scrollEnd', this.handleScrollEnd);\n  }\n\n  componentWillReceiveProps(nextProps) {\n    this.refresh(true, nextProps);\n  }\n\n  componentWillUnmount() {\n    this._sizeDetector.uninstall(this._root);\n\n    this._scroller.off('scroll', this.handleScroll);\n    this._scroller.off('scrollStart', this.handleScrollStart);\n    this._scroller.off('scrollEnd', this.handleScrollEnd);\n    this._scroller.destroy();\n  }\n\n  render() {\n    const {styles} = Grid;\n\n    const contentStyle = {\n      ...styles.scrollContent,\n      position: 'absolute',\n      width: this.calculateScrollableWidth(this.props, this.state.cells),\n      height: this.calculateScrollableHeight(this.props, this.state.cells)\n    };\n\n    return (\n      <div style={styles.container}\n           ref={this.bindRoot}\n           key=\"grid-root\">\n        <div style={styles.scrollOverlay}\n             ref={this.bindScrollOverlay}\n             key=\"grid-scroll-overlay\">\n          <div className=\"scroll-inner\"\n               style={styles.scrollContainer}\n               ref={this.bindScrollInner}\n               key=\"grid-scroll-inner\">\n            <div className={cx('scroll-container')}\n                 style={contentStyle}\n                 key=\"grid-scroll-container\">\n              <div style={styles.gridBody}\n                   key=\"grid-scroll-body\">\n                {this.renderLeftPane()}\n                {this.renderRightPane()}\n                {this.renderCenterPane()}\n                {this.renderColumnResizeGuide()}\n                {this.renderRowResizeGuide()}\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderLeftPane() {\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      width: this.fixedLeftColumnsWidth\n    };\n\n    return (\n      <div ref={this.bindLeftPane}\n           className={cx('left-pane')}\n           style={attrs}\n           key=\"grid-left-pane\">\n        {this.renderLeftPaneHeader()}\n        {this.renderLeftPaneFooter()}\n        {this.renderLeftPaneBody()}\n      </div>\n    );\n  }\n\n  renderLeftPaneHeader() {\n    if (!this.state.cells || this.props.fixedLeftColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: 0,\n      right: 0,\n      height: this.calculateFixedHeadersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n    };\n\n    return (\n      <div ref={this.bindLeftPaneHeader}\n           className={cx('left-pane-header')}\n           style={attrs}\n           key=\"grid-left-pane-header\">\n        <div className={cx(styles.leftPaneHeaderContent)}\n             style={contentStyle}\n             key=\"grid-left-pane-header-content\">\n          {this.renderCellRange('left-pane-header', 0, this.props.fixedHeaderCount - 1, 0, this.props.fixedLeftColumnCount - 1, this.state.cells.topLeftRows, this.state.cells.topLeftColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderLeftPaneFooter() {\n    if (!this.state.cells || this.props.fixedLeftColumnCount < 1 || this.props.fixedFooterCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      height: this.calculateFixedFootersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n    };\n\n    const fromRow = this.props.rowCount > 0 ? this.props.rowCount - this.props.fixedFooterCount : 0;\n    const toRow = fromRow ? fromRow + this.props.fixedFooterCount - 1 : null;\n\n    return (\n      <div ref={this.bindLeftPaneFooter}\n           className={cx('left-pane-footer')}\n           style={attrs}\n           key=\"grid-left-pane-footer\">\n        <div className={cx(styles.leftPaneFooterContent)}\n             style={contentStyle}\n             key=\"grid-left-pane-footer-content\">\n          {this.renderCellRange('left-pane-footer', fromRow, toRow, 0, this.props.fixedLeftColumnCount - 1, this.state.cells.bottomLeftRows, this.state.cells.bottomLeftColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderLeftPaneBody() {\n    if (!this.state.cells || this.props.fixedLeftColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: this.calculateFixedHeadersHeight(this.state.cells),\n      right: 0,\n      bottom: this.calculateFixedFootersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth,\n      height: this.props.estimatedRowHeight * this.props.rowCount,\n      ...styles.translatedPane\n    };\n\n    const fromRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[0][0] : null;\n    const toRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[this.state.cells.leftRows.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindLeftPaneBody}\n           className={cx('left-pane-body')}\n           style={attrs}\n           key=\"grid-left-pane-body\">\n        <div className={cx(styles.leftPaneBodyContent)}\n             style={contentStyle}\n             key=\"grid-left-pane-body-content\">\n          {this.renderCellRange('left-pane-body', fromRow, toRow, 0, this.props.fixedLeftColumnCount - 1, this.state.cells.leftRows, this.state.cells.leftColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderRightPane() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      right: 0,\n      width: this.fixedRightColumnsWidth\n    };\n\n    return (\n      <div ref={this.bindRightPane}\n           className={cx('right-pane')}\n           style={attrs}\n           key=\"grid-right-pane\">\n        {this.renderRightPaneHeader()}\n        {this.renderRightPaneFooter()}\n        {this.renderRightPaneBody()}\n      </div>\n    );\n  }\n\n  renderRightPaneHeader() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: 0,\n      right: 0,\n      height: this.calculateFixedHeadersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n    };\n\n    const fromColumn = this.props.columnCount > 0 ? this.props.columnCount - this.props.fixedRightColumnCount : 0;\n    const toColumn = fromColumn ? fromColumn + this.props.fixedRightColumnCount - 1 : null;\n\n    return (\n      <div ref={this.bindRightPaneHeader}\n           className={cx('right-pane-header')}\n           style={attrs}\n           key=\"grid-right-pane-header\">\n        <div className={cx(styles.rightPaneHeaderContent)}\n             style={contentStyle}\n             key=\"grid-right-pane-header-content\">\n          {this.renderCellRange('right-pane-header', 0, this.props.fixedHeaderCount - 1, fromColumn, toColumn, this.state.cells.topRightRows, this.state.cells.topRightColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderRightPaneFooter() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1 || this.props.fixedFooterCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      height: this.calculateFixedFootersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n    };\n\n    const fromRow = this.props.rowCount > 0 ? this.props.rowCount - this.props.fixedFooterCount : 0;\n    const toRow = fromRow ? fromRow + this.props.fixedFooterCount - 1 : null;\n\n    const fromColumn = this.props.columnCount > 0 ? this.props.columnCount - this.props.fixedRightColumnCount : 0;\n    const toColumn = fromColumn ? fromColumn + this.props.fixedRightColumnCount - 1 : null;\n\n    return (\n      <div ref={this.bindRightPaneFooter}\n           className={cx('right-pane-footer')}\n           style={attrs}\n           key=\"grid-right-pane-footer\">\n        <div className={cx(styles.rightPaneFooterContent)}\n             style={contentStyle}\n             key=\"grid-right-pane-footer-content\">\n          {this.renderCellRange('right-pane-footer', fromRow, toRow, fromColumn, toColumn, this.state.cells.bottomRightRows, this.state.cells.bottomRightColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderRightPaneBody() {\n    if (!this.state.cells || this.props.fixedRightColumnCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: this.calculateFixedHeadersHeight(this.state.cells),\n      right: 0,\n      bottom: this.calculateFixedFootersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth,\n      height: this.props.estimatedRowHeight * this.props.rowCount,\n      top: -this.calculateFixedHeadersHeight(this.state.cells),\n      bottom: -this.calculateFixedFootersHeight(this.state.cells),\n      ...styles.translatedPane\n    };\n\n    const fromColumn = this.props.columnCount > 0 ? this.props.columnCount - this.props.fixedRightColumnCount : 0;\n    const toColumn = fromColumn ? fromColumn + this.props.fixedRightColumnCount - 1 : null;\n\n    const fromRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[0][0] : null;\n    const toRow = this.state.cells.leftRows.length ? this.state.cells.leftRows[this.state.cells.leftRows.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindRightPaneBody}\n           className={cx('right-pane-body')}\n           style={attrs}\n           key=\"grid-right-pane-body\">\n        <div className={cx(styles.rightPaneBodyContent)}\n             style={contentStyle}\n             key=\"grid-right-pane-body-content\">\n          {this.renderCellRange('right-pane-body', fromRow, toRow, fromColumn, toColumn, this.state.cells.rightRows, this.state.cells.rightColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderCenterPane() {\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: this.fixedLeftColumnsWidth,\n      right: this.fixedRightColumnsWidth\n    };\n\n    return (\n      <div ref={this.bindCenterPane}\n           className={cx('center-pane')}\n           style={attrs}\n           key=\"grid-center-pane\">\n        {this.renderCenterPaneHeader()}\n        {this.renderCenterPaneFooter()}\n        {this.renderCenterPaneBody()}\n      </div>\n    );\n  }\n\n  renderCenterPaneHeader() {\n    if (!this.state.cells || this.props.fixedHeaderCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: 0,\n      right: 0,\n      height: this.calculateFixedHeadersHeight(this.state.cells),\n      overflow: 'visible' // TODO(zhm) this is needed for the column menus, what does it possibly break?\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth * this.props.columnCount,\n      height: this.props.estimatedRowHeight,\n      left: -this.fixedLeftColumnsWidth,\n      ...styles.translatedPane\n    };\n\n    const fromColumn = this.state.cells.topColumns.length ? this.state.cells.topColumns[0][0] : null;\n    const toColumn = this.state.cells.topColumns.length ? this.state.cells.topColumns[this.state.cells.topColumns.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindCenterPaneHeader}\n           className={cx('center-pane-header')}\n           style={attrs}\n           key=\"grid-center-pane-header\">\n        <div className={cx(styles.centerPaneHeaderContent)}\n             style={contentStyle}\n             key=\"grid-center-pane-header-content\">\n          {this.renderCellRange('center-pane-header', 0, this.props.fixedHeaderCount - 1, fromColumn, toColumn, this.state.cells.topRows, this.state.cells.topColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderCenterPaneFooter() {\n    if (!this.state.cells || this.props.fixedFooterCount < 1) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      height: this.calculateFixedFootersHeight(this.state.cells),\n      overflow: 'visible' // TODO(zhm) this is needed for the column menus, what does it possibly break?\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth * this.props.columnCount,\n      height: this.props.estimatedRowHeight,\n      left: -this.fixedLeftColumnsWidth,\n      ...styles.translatedPane\n    };\n\n    const fromColumn = this.state.cells.bottomColumns.length ? this.state.cells.bottomColumns[0][0] : null;\n    const toColumn = this.state.cells.bottomColumns.length ? this.state.cells.bottomColumns[this.state.cells.bottomColumns.length - 1][0] : null;\n\n    const fromRow = this.props.rowCount > 0 ? this.props.rowCount - this.props.fixedFooterCount : 0;\n    const toRow = fromRow ? fromRow + this.props.fixedFooterCount - 1 : null;\n\n    return (\n      <div ref={this.bindCenterPaneFooter}\n           className={cx('center-pane-footer')}\n           style={attrs}\n           key=\"grid-center-pane-footer\">\n        <div className={cx(styles.centerPaneHeaderContent)}\n             style={contentStyle}\n             key=\"grid-center-pane-footer-content\">\n          {this.renderCellRange('center-pane-footer', fromRow, toRow, fromColumn, toColumn, this.state.cells.bottomRows, this.state.cells.bottomColumns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderCenterPaneBody() {\n    if (!this.state.cells) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const attrs = {\n      ...styles.pane,\n      left: 0,\n      top: this.calculateFixedHeadersHeight(this.state.cells),\n      right: 0,\n      bottom: this.calculateFixedFootersHeight(this.state.cells)\n    };\n\n    const contentStyle = {\n      position: 'absolute',\n      width: this.props.estimatedColumnWidth * this.props.columnCount,\n      height: this.props.estimatedRowHeight * this.props.rowCount,\n      left: -this.fixedLeftColumnsWidth,\n      top: -this.calculateFixedHeadersHeight(this.state.cells),\n      ...styles.translatedPane\n    };\n\n    const fromRow = this.state.cells.rows.length ? this.state.cells.rows[0][0] : null;\n    const toRow = this.state.cells.rows.length ? this.state.cells.rows[this.state.cells.rows.length - 1][0] : null;\n\n    const fromColumn = this.state.cells.columns.length ? this.state.cells.columns[0][0] : null;\n    const toColumn = this.state.cells.columns.length ? this.state.cells.columns[this.state.cells.columns.length - 1][0] : null;\n\n    return (\n      <div ref={this.bindCenterPaneBody}\n           className={cx('center-pane-body')}\n           style={attrs}\n           key=\"grid-center-pane-body\">\n        <div className={cx(styles.centerPaneBodyContent)}\n             style={contentStyle}\n             key=\"grid-center-pane-body-content\">\n          {this.renderCellRange('center-pane-body', fromRow, toRow, fromColumn, toColumn, this.state.cells.rows, this.state.cells.columns)}\n        </div>\n      </div>\n    );\n  }\n\n  renderColumnResizeGuide() {\n    if (this._resizingColumn == null) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const column = this.state.cells.columns.find((cell) => {\n      return cell[0] === this._resizingColumn;\n    });\n\n    const guideStyle = {\n      ...styles.columnResizeGuide,\n      left: column[1] + column[2],\n      top: this._centerPaneBody.offsetTop - 1\n    };\n\n    return (\n      <div style={guideStyle}\n           key=\"grid-column-resize-guide\" />\n    );\n  }\n\n  renderRowResizeGuide() {\n    if (this._resizingRow == null) {\n      return null;\n    }\n\n    const {styles} = Grid;\n\n    const row = this.state.cells.rows.find((cell) => {\n      return cell[0] === this._resizingRow;\n    });\n\n    const guideStyle = {\n      ...styles.rowResizeGuide,\n      top: row[1] + row[2] - 1,\n      left: this._leftPane.offsetWidth\n    };\n\n    return (\n      <div style={guideStyle}\n           key=\"grid-row-resize-guide\" />\n    );\n  }\n\n  get isScrolling() {\n    return this._scrolling;\n  }\n\n  // TODO: This calculation appears to produce a higher width than needed if width ?\n  calculateScrollableWidth({estimatedColumnWidth, columnCount}, cells) {\n    if (!cells || !cells.columns.length) {\n      return estimatedColumnWidth * columnCount;\n    }\n\n    const lastColumn = cells.columns[cells.columns.length - 1];\n    const width = lastColumn[1] + lastColumn[2];\n\n    return width + (((columnCount - 1) - lastColumn[0]) * estimatedColumnWidth);\n  }\n\n  calculateScrollableHeight({estimatedRowHeight, rowCount}, cells) {\n    if (!cells || !cells.rows.length) {\n      return Math.min(estimatedRowHeight * rowCount, MAX_SCROLLABLE_HEIGHT);\n    }\n\n    const lastRow = cells.rows[cells.rows.length - 1];\n    const height = lastRow[1] + lastRow[2];\n\n    return Math.min(height + (((rowCount - 1) - lastRow[0]) * estimatedRowHeight), MAX_SCROLLABLE_HEIGHT);\n  }\n\n  calculateFixedHeadersHeight(cells) {\n    if (!cells || !cells.topLeftRows.length) {\n      return 0;\n    }\n\n    const lastTopLeftRow = cells.topLeftRows[cells.topLeftRows.length - 1];\n    const topOffset = lastTopLeftRow[1] + lastTopLeftRow[2];\n\n    return topOffset;\n  }\n\n  calculateFixedFootersHeight(cells) {\n    if (!cells || !cells.bottomLeftRows.length) {\n      return 0;\n    }\n\n    const lastBottomRow = cells.bottomLeftRows[cells.bottomLeftRows.length - 1];\n    const lastBottomRowTop = lastBottomRow[1] + lastBottomRow[2];\n\n    return lastBottomRowTop;\n  }\n\n  get fixedRightColumnsWidth() {\n    if (!this.state.cells || this.state.cells.rightColumns.length === 0) {\n      return 0;\n    }\n\n    const lastColumn = this.state.cells.rightColumns[this.state.cells.rightColumns.length - 1];\n    const lastOffset = lastColumn[1] + lastColumn[2];\n\n    return lastOffset;\n  }\n\n  get fixedLeftColumnsWidth() {\n    if (!this.state.cells || !this.state.cells.leftColumns.length) {\n      return 0;\n    }\n\n    const lastColumn = this.state.cells.leftColumns[this.state.cells.leftColumns.length - 1];\n    const lastOffset = lastColumn[1] + lastColumn[2];\n\n    return lastOffset;\n  }\n\n  bindRoot = (node) => {\n    this._root = node;\n  }\n\n  bindScrollOverlay = (node) => {\n    this._scrollOverlay = node;\n  }\n\n  bindScrollInner = (node) => {\n    this._scrollInner = node;\n  }\n\n  bindLeftPane = (node) => {\n    this._leftPane = node;\n  }\n\n  bindLeftPaneHeader = (node) => {\n    this._leftPaneHeader = node;\n  }\n\n  bindLeftPaneFooter = (node) => {\n    this._leftPaneFooter = node;\n  }\n\n  bindLeftPaneBody = (node) => {\n    this._leftPaneBody = node;\n  }\n\n  bindRightPane = (node) => {\n    this._rightPane = node;\n  }\n\n  bindRightPaneHeader = (node) => {\n    this._rightPaneHeader = node;\n  }\n\n  bindRightPaneFooter = (node) => {\n    this._rightPaneFooter = node;\n  }\n\n  bindRightPaneBody = (node) => {\n    this._rightPaneBody = node;\n  }\n\n  bindCenterPane = (node) => {\n    this._centerPane = node;\n  }\n\n  bindCenterPaneHeader = (node) => {\n    this._centerPaneHeader = node;\n  }\n\n  bindCenterPaneFooter = (node) => {\n    this._centerPaneFooter = node;\n  }\n\n  bindCenterPaneBody = (node) => {\n    this._centerPaneBody = node;\n  }\n\n  handleResize = (event) => {\n    this.update(this.scrollTop, this.scrollLeft);\n  }\n\n  handleScroll = (event) => {\n    this.update(this.scrollTop, this.scrollLeft);\n\n    if (this.props.onScroll) {\n      this.props.onScroll(this);\n    }\n  }\n\n  handleScrollStart = (event) => {\n    this._scrolling = true;\n\n    if (this.props.onScrollStart) {\n      this.props.onScrollStart(this);\n    }\n  }\n\n  handleScrollEnd = (event) => {\n    this._scrolling = false;\n\n    if (this.props.onScrollEnd) {\n      this.props.onScrollEnd(this);\n    }\n  }\n\n  handleColumnResizeStart = (column, width) => {\n    this._resizingColumn = column;\n\n    // this._pinnedColumnWidths[column] = Math.min(10000, Math.max(20, width));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleColumnResize = (column, width) => {\n    this._pinnedColumnWidths[column] = Math.min(10000, Math.max(20, width));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleColumnResizeEnd = () => {\n    this._resizingColumn = null;\n\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleRowResizeStart = (row, height) => {\n    this._resizingRow = row;\n\n    // this._pinnedRowHeights[row] = Math.min(10000, Math.max(20, height));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleRowResize = (row, height) => {\n    this._pinnedRowHeights[row] = Math.min(10000, Math.max(20, height));\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  handleRowResizeEnd = () => {\n    this._resizingRow = null;\n\n    this.invalidateSizes();\n    this.refresh();\n  }\n\n  invalidateSizes() {\n    this.calculator.invalidate();\n  }\n\n  refresh = (force, props) => {\n    this.update(this.scrollTop, this.scrollLeft, force, props || this.props);\n  }\n\n  update(scrollTop, scrollLeft, force, props) {\n    if (!this._root) {\n      return;\n    }\n\n    props = props || this.props;\n\n    const x = scrollLeft - props.preloadPixelsX;\n    const y = scrollTop - props.preloadPixelsY;\n\n    const bounds = {\n      left: Math.max(0, x),\n      top: Math.max(0, y),\n      width: this._root.clientWidth + (2 * props.preloadPixelsX) + (x < 0 ? x : 0),\n      height: this._root.clientHeight + (2 * props.preloadPixelsY) + (y < 0 ? y : 0)\n    };\n\n    const cells = this.calculator.cellsWithinBounds(bounds, props.rowCount, props.columnCount);\n\n    if (cells.changed || force) {\n      const fromRow = cells.rows.length ? cells.rows[0][0] : null;\n      const toRow = cells.rows.length ? cells.rows[cells.rows.length - 1][0] : null;\n      const fromColumn = cells.columns.length ? cells.columns[0][0] : null;\n      const toColumn = cells.columns.length ? cells.columns[cells.columns.length - 1][0] : null;\n\n      if (props.onExtentsChange) {\n        props.onExtentsChange(fromRow, toRow, fromColumn, toColumn);\n      }\n\n      this.setState({cells: cells});\n    }\n\n    if (cells) {\n      this.setScroll(scrollLeft, scrollTop, cells);\n    }\n\n    const scrollableWidth = this.calculateScrollableWidth(props, cells);\n    const scrollableHeight = this.calculateScrollableHeight(props, cells);\n\n    // if the srollable width or height changes, refresh the scroller\n    if (force || this._lastScrollableWidth !== scrollableWidth || this._lastScrollableHeight !== scrollableHeight) {\n      this._lastScrollableWidth = scrollableWidth;\n      this._lastScrollableHeight = scrollableHeight;\n\n      // if there were no cells, there might be more cells above. This handles a case where the table renders at a scroll\n      // offset with no data. For example, scroll down in a huge list of a results, then filter it to only a few results.\n      // The scroll view is left at a large offset but there's no data. Because we don't know how far we'd have to move\n      // up to find data, the simplest thing to do is to go to position 0, 0.\n      const diffY = Math.max(0, (scrollTop + this._root.clientHeight) - Math.max(this._root.clientHeight, scrollableHeight));\n      const diffX = Math.max(0, (scrollLeft + this._root.clientWidth) - Math.max(this._root.clientWidth, scrollableWidth));\n\n      setTimeout(() => {\n        if (diffY > 0 || diffX > 0) {\n          const updatedScrollLeft = scrollLeft - diffX;\n          const updatedScrollTop = scrollTop - diffY;\n\n          this._scroller.scrollTo(-updatedScrollLeft, -updatedScrollTop);\n          this.update(updatedScrollTop, updatedScrollLeft);\n        }\n\n        this._scroller.refresh();\n      }, 1);\n    }\n  }\n\n  setScroll(x, y, cells) {\n    const fixedHeadersHeight = this.calculateFixedHeadersHeight(cells);\n\n    if (this._leftPaneBody) {\n      this._leftPaneBody.childNodes[0].style.top = (-y - fixedHeadersHeight) + 'px';\n    }\n\n    if (this._rightPaneBody) {\n      this._rightPaneBody.childNodes[0].style.top = (-y - fixedHeadersHeight) + 'px';\n    }\n\n    if (this._centerPaneHeader) {\n      this._centerPaneHeader.childNodes[0].style.left = (-x - this.fixedLeftColumnsWidth) + 'px';\n    }\n\n    if (this._centerPaneFooter) {\n      this._centerPaneFooter.childNodes[0].style.left = (-x - this.fixedLeftColumnsWidth) + 'px';\n    }\n\n    if (this._centerPaneBody) {\n      this._centerPaneBody.childNodes[0].style.top = (-y - fixedHeadersHeight) + 'px';\n      this._centerPaneBody.childNodes[0].style.left = (-x - this.fixedLeftColumnsWidth) + 'px';\n    }\n\n    if (this._leftPane) {\n      this._leftPane.style.left = x + 'px';\n      this._leftPane.style.top = y + 'px';\n      this._leftPane.style.height = this._scrollOverlay.offsetHeight + 'px';\n    }\n\n    if (this._rightPane) {\n      this._rightPane.style.left = (x + this._scrollOverlay.offsetWidth - this.fixedRightColumnsWidth) + 'px';\n      this._rightPane.style.top = y + 'px';\n      this._rightPane.style.height = this._scrollOverlay.offsetHeight + 'px';\n    }\n\n    if (this._centerPane) {\n      this._centerPane.style.left = (x + this.fixedLeftColumnsWidth) + 'px';\n      this._centerPane.style.top = y + 'px';\n      this._centerPane.style.height = this._scrollOverlay.offsetHeight + 'px';\n      this._centerPane.style.width = (this._scrollOverlay.offsetWidth - this.fixedRightColumnsWidth - this.fixedLeftColumnsWidth) + 'px';\n    }\n\n    if (this._scrollInner) {\n      if (this._scrollInner.childNodes[0].offsetHeight < this._scrollInner.offsetHeight) {\n        this._scrollInner.childNodes[0].style.height = this._scrollInner.offsetHeight + 'px';\n      }\n\n      if (this._scrollInner.childNodes[0].offsetWidth < this._scrollInner.offsetWidth) {\n        this._scrollInner.childNodes[0].style.width = this._scrollInner.offsetWidth + 'px';\n      }\n    }\n  }\n\n  get calculator() {\n    if (!this._calculator) {\n      this._calculator = new GridCalculator();\n      this._calculator.estimatedColumnWidth = this.props.estimatedColumnWidth;\n      this._calculator.estimatedRowHeight = this.props.estimatedRowHeight;\n      this._calculator.fixedLeftColumnCount = this.props.fixedLeftColumnCount;\n      this._calculator.fixedRightColumnCount = this.props.fixedRightColumnCount;\n      this._calculator.fixedHeaderCount = this.props.fixedHeaderCount;\n      this._calculator.fixedFooterCount = this.props.fixedFooterCount;\n      this._calculator.calculateRowHeight = this.calculateRowHeight;\n      this._calculator.calculateColumnWidth = this.calculateColumnWidth;\n    }\n\n    return this._calculator;\n  }\n\n  calculateRowHeight = (row) => {\n    if (this._pinnedRowHeights[row] != null) {\n      return this._pinnedRowHeights[row];\n    }\n\n    return this.props.rowHeight(row);\n  }\n\n  calculateColumnWidth = (column) => {\n    if (this._pinnedColumnWidths[column] != null) {\n      return this._pinnedColumnWidths[column];\n    }\n\n    return this.props.columnWidth(column);\n  }\n\n  clearPinnedWidths() {\n    this._pinnedColumnWidths = {};\n  }\n\n  clearPinnedWidth(columnIndex) {\n    delete this._pinnedColumnWidths[columnIndex];\n  }\n\n  clearPinnedHeights() {\n    this._pinnedRowHeights = {};\n  }\n\n  clearPinnedHeight(rowIndex) {\n    delete this._pinnedRowHeights[rowIndex];\n  }\n\n  renderRow = (pane, cells, rowData, columnRange) => {\n    const [ rowIndex, rowTop, height ] = rowData;\n\n    const rowStyle = {\n      position: 'absolute',\n      left: 0,\n      top: rowTop,\n      height: height\n    };\n\n    const renderCells = this.props.renderCells || this.renderCells;\n\n    return (\n      <div key={'row-' + rowIndex}\n           style={rowStyle}>\n        {renderCells(cells)}\n      </div>\n    );\n  }\n\n  renderCells(cells) {\n    return cells;\n  }\n\n  renderRows(rows) {\n    return rows;\n  }\n\n  renderCellRange(pane, fromRow, toRow, fromColumn, toColumn, rows, columns) {\n    const rowRange = [];\n\n    const renderCell = this.props.renderCell;\n    const renderRow = this.props.renderRow || this.renderRow;\n    const renderRows = this.props.renderRows || this.renderRows;\n\n    for (let row = toRow, visibleRowIndex = 0; row >= fromRow; --row, ++visibleRowIndex) {\n      const rowCells = [];\n      const rowData = rows[row - fromRow];\n      const columnRange = [];\n\n      for (let column = toColumn, visibleColumnIndex = 0; column >= fromColumn; --column, ++visibleColumnIndex) {\n        const columnData = columns[column - fromColumn];\n\n        columnRange.push(columnData);\n\n        rowCells.push(renderCell(pane, row, rowData, column, columnData, this, visibleRowIndex, visibleColumnIndex));\n      }\n\n      rowRange.push(renderRow(pane, rowCells, rowData, columnRange));\n    }\n\n    return renderRows(rowRange);\n  }\n\n  get scrollTop() {\n    return -this._scroller.y;\n  }\n\n  get scrollLeft() {\n    return -this._scroller.x;\n  }\n}\n\nconst styles = {\n  container: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  },\n\n  scrollOverlay: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden'\n  },\n\n  scrollContainer: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0\n  },\n\n  gridBody: {\n    position: 'absolute',\n    left: 0,\n    top: 0,\n    right: 0,\n    bottom: 0,\n    overflow: 'hidden'\n  },\n\n  pane: {\n    position: 'absolute',\n    overflow: 'hidden'\n  },\n\n  translatedPane: {\n  },\n\n  columnResizeGuide: {\n    position: 'absolute',\n    top: 1,\n    bottom: 0,\n    width: 1,\n    backgroundColor: '#18a3f7',\n    cursor: 'ew-resize',\n    borderRadius: 0\n  },\n\n  rowResizeGuide: {\n    position: 'absolute',\n    left: 1,\n    right: 0,\n    height: 1,\n    backgroundColor: '#18a3f7',\n    cursor: 'ns-resize',\n    borderRadius: 0\n  }\n};\n\nGrid.styles = styles;\n"]}